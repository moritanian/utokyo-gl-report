window.onload=function(){function loadFile(url,data,callback,errorCallback){var request=new XMLHttpRequest;request.open("GET",url,true);request.onreadystatechange=function(){if(request.readyState==4){if(request.status==200){callback(request.responseText,data)}else{errorCallback(url)}}};request.send(null)}function loadFiles(urls,callback,errorCallback){var numUrls=urls.length;var numComplete=0;var result=new Array(numUrls);function partialCallback(text,urlIndex){result[urlIndex]=text;numComplete++;if(numComplete==numUrls){callback(result)}}for(var i=0;i<numUrls;i++){loadFile(urls[i],i,partialCallback,errorCallback)}}function loadShaders(){var vsDom=b("vs");var fsDom=b("fs");var vsUrl=vsDom.getAttribute("source");var fsUrl=fsDom.getAttribute("source");var resolve,reject;reject=function(e){console.warn(e);console.warn("An error has occured with loading the shadering file.")};if(vsUrl&&fsUrl){resolve=function(ts){webglSetup(ts[0],ts[1])};loadFiles([vsUrl,fsUrl],resolve,reject)}else if(vsUrl){resolve=function(t){webglSetup(t,fsDom.text)};loadFile(vsUrl,0,resolve,reject)}else if(fsUrl){resolve=function(t){webglSetup(vsDom.text,t)};loadFile(fsUrl,0,resolve,reject)}else{webglSetup(vsDom.text,fsDom.text)}}var a,b,c,d,e,f,g,h,m,l,p,t,u,v,w,x,y,z;b=function(s){return document.getElementById(s)};function k(h){e=h.keyCode!==27}w=window;w.addEventListener("keydown",k,true);c=b("c");g=c.getContext("webgl");p=g.createProgram();loadShaders();function webglSetup(vsText,fsText){h=function(i,j){k=g.createShader(g.VERTEX_SHADER-i);g.shaderSource(k,j);g.compileShader(k);g.attachShader(p,k);l=g.getShaderInfoLog(k);if(l){console.log(l)}return l};if(!h(0,vsText)&&!h(1,fsText)){g.linkProgram(p)}e=g.getProgramParameter(p,g.LINK_STATUS);g.useProgram(p);u={};u.time=g.getUniformLocation(p,"time");u.resolution=g.getUniformLocation(p,"resolution");u.mouse=g.getUniformLocation(p,"mouse");m=[.5,.5];document.addEventListener("mousemove",function(e){m[0]=e.clientX/x;m[1]=e.clientY/y});g.bindBuffer(g.ARRAY_BUFFER,g.createBuffer());g.bufferData(g.ARRAY_BUFFER,new Float32Array([-1,1,0,-1,-1,0,1,1,0,1,-1,0]),g.STATIC_DRAW);a=g.getAttribLocation(p,"position");g.enableVertexAttribArray(a);g.vertexAttribPointer(a,3,g.FLOAT,false,0,0);g.clearColor(0,0,0,1);z=(new Date).getTime();(function render(){if(!e){return}c.width=x=w.innerWidth;c.height=y=w.innerHeight;g.viewport(0,0,x,y);d=((new Date).getTime()-z)*.001;g.clear(g.COLOR_BUFFER_BIT);g.uniform1f(u.time,d);g.uniform2fv(u.resolution,[x,y]);g.uniform2fv(u.mouse,m);g.drawArrays(g.TRIANGLE_STRIP,0,4);g.flush();requestAnimationFrame(render)})()}};