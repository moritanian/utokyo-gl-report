<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <link rel="shortcut icon" type="image/x-icon" href="icon/teapod.png">

    <link rel=stylesheet href="css/glsl-base.css"> 
   
    <script type="text/javascript" src="js/mini_query.js"></script>
    <script type="text/javascript" src="js/glsl-review.js"></script>

    <!--<script id="vs" source="shader/nothing.vs" type="xs/fs"></script> -->
    <glsl-base>
        <debug value="true"></debug>
        <tab-size value="4"></tab-size>
        <layout-col value="2"></layout-col>
    </glsl-base>


    <style>
      /* ウィンドウ全体にcanvasをぴったり配置するためのStyle */
      * {
        margin:0;
        padding:0;
        overflow:hidden;
      }
      html,body{
        height:100%;
        background-color: black;
      }
      .back-wall {
        background-image: url(img/Character01_Vis01.png);
        width: 100%;
        height: 100%;
        position: absolute;
      }
    </style>
    <title>GLSL VIEWER</title>

    <script>
      window.onload = function(){

        var dbgOpt = {tab: "\t", winName: window.name};
        

        var glsl_base_e = document.getElementsByTagName('glsl-base');
    
        if(glsl_base_e && glsl_base_e.length > 0){
        
          var children = glsl_base_e[0].childNodes;
          
          for(var i=0; i<children.length; i++){
          
            if(i%2 == 0)
                  continue;
          
            var ce = children[i];
        
            switch(ce.tagName){
              
              case "DEBUG":
                dbg = ce.getAttribute('value') === "true";
                break;

              case "TAB-SIZE":

                var tabSize = parseInt(ce.getAttribute('value')); 
                dbgOpt.tabSize = tabSize;
                dbgOpt.tab = "";

                for(var id=0; id < tabSize; id++){
                  dbgOpt.tab += " ";
                }
                  
                break;

                case "LAYOUT-COL":
                  dbgOpt.layoutCol = ce.getAttribute('value') || 1;

            }
          }
        }

        var review = new glsl_review(true, dbgOpt);
        if(!dbgOpt.winName)
          review.recoverLastView();

      }
    </script>
  
  </head>
  <body>
    <canvas id="c"></canvas>
    <div id="glsl-base-debug-container">
      <div id="glsl-base-debug-normalizer">+</div>
      <div id="glsl-base-debug-main">
        <div class="back-wall"></div>
        
        <div id="top-btns">
          <div id='file-btn' class="top-btn">file</div>
          <div id='folder-btn' class="top-btn">folder</div>
          <div id='view-btn' class="top-btn">
            <div>view</div>
            <ul id='view-dp-parent'>
                <li id="layout-btn">
                  <span>layout</span>
                  <ul id="layout-dp-parent">
                      <li class="layout-btn-child" col='1'>Single</li>
                      <li class="layout-btn-child" col='2'>Columns: 2</li>
                      <li class="layout-btn-child" col='3'>Columns: 3</li>
                      <li class="layout-btn-child" col='4'>Columns: 4</li>
                  </ul>
                </li>
                <li>identation</li>
                <li>font size </li>
            </ul>
          </div>
          <div id='tool-btn' class="top-btn">tool</div>
          <!--<input type="file" id="file-select" name="files[]" multiple />-->
          <input type="file" id="file-select" name="file" />
          <input type="file" id="folder-select" name="file" webkitdirectory/>
          
          <div id="minimize-btn">-</div>

        </div>
        
        <div id="top-tabs"></div>
        
        <div id='canvas-field'>
          <div id="review-canvas"></div>
          <div id='separator-parent'></div>
          <div class="cursor blinking" id="cursor"></div>
        </div>


      </div>
    </div>

  </body>
</html>